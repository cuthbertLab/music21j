<!DOCTYPE html>

<html lang="en">
<head>
	<meta charset="utf-8">
	<title>Music21j Source: music21/beam.js</title>

	<!--[if lt IE 9]>
	<script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
	<![endif]-->
	<link type="text/css" rel="stylesheet" href="styles/sunlight.default.css">

	<link type="text/css" rel="stylesheet" href="styles/site.spruce.css">

</head>

<body>
<div class="container-fluid">
	<div class="navbar navbar-fixed-top navbar-inverse">
		<div class="navbar-inner">
			<a class="brand" href="index.html">Music21j</a>
			<ul class="nav">

				<li class="dropdown">
					<a href="namespaces.list.html" class="dropdown-toggle" data-toggle="dropdown">Namespaces<b
						class="caret"></b></a>

					<ul class="dropdown-menu ">

						<li>
							<a href="music21.articulations.html">music21.articulations</a>
						</li>

						<li>
							<a href="music21.audioRecording.html">music21.audioRecording</a>
						</li>

						<li>
							<a href="music21.audioSearch.html">music21.audioSearch</a>
						</li>

						<li>
							<a href="music21.base.html">music21.base</a>
						</li>

						<li>
							<a href="music21.beam.html">music21.beam</a>
						</li>

						<li>
							<a href="music21.chord.html">music21.chord</a>
						</li>

						<li>
							<a href="music21.clef.html">music21.clef</a>
						</li>

						<li>
							<a href="music21.common.html">music21.common</a>
						</li>

						<li>
							<a href="music21.derivation.music21.derivation.html">music21.derivation.music21.derivation</a>
						</li>

						<li>
							<a href="music21.dynamics.html">music21.dynamics</a>
						</li>

						<li>
							<a href="music21.exceptions21.html">music21.exceptions21</a>
						</li>

						<li>
							<a href="music21.expressions.html">music21.expressions</a>
						</li>

						<li>
							<a href="music21.fromPython.html">music21.fromPython</a>
						</li>

						<li>
							<a href="music21.harmony.html">music21.harmony</a>
						</li>

						<li>
							<a href="music21.instrument.html">music21.instrument</a>
						</li>

						<li>
							<a href="music21.interval.html">music21.interval</a>
						</li>

						<li>
							<a href="music21.key.html">music21.key</a>
						</li>

						<li>
							<a href="music21.keyboard.html">music21.keyboard</a>
						</li>

						<li>
							<a href="music21.layout.html">music21.layout</a>
						</li>

						<li>
							<a href="music21.meter.html">music21.meter</a>
						</li>

						<li>
							<a href="music21.miditools.html">music21.miditools</a>
						</li>

						<li>
							<a href="music21.musicxml.html">music21.musicxml</a>
						</li>

						<li>
							<a href="music21.musicxml.m21ToXml.html">music21.musicxml.m21ToXml</a>
						</li>

						<li>
							<a href="music21.note.html">music21.note</a>
						</li>

						<li>
							<a href="music21.pitch.html">music21.pitch</a>
						</li>

						<li>
							<a href="music21.prebase.html">music21.prebase</a>
						</li>

						<li>
							<a href="music21.renderOptions.html">music21.renderOptions</a>
						</li>

						<li>
							<a href="music21.roman.html">music21.roman</a>
						</li>

						<li>
							<a href="music21.scale.html">music21.scale</a>
						</li>

						<li>
							<a href="music21.sites.html">music21.sites</a>
						</li>

						<li>
							<a href="music21.stream.html">music21.stream</a>
						</li>

						<li>
							<a href="music21.tempo.html">music21.tempo</a>
						</li>

						<li>
							<a href="music21.tie.html">music21.tie</a>
						</li>

						<li>
							<a href="music21.tinyNotation.html">music21.tinyNotation</a>
						</li>

						<li>
							<a href="music21.voiceLeading.html">music21.voiceLeading</a>
						</li>


					</ul>
				</li>

				<li class="dropdown">
					<a href="modules.list.html" class="dropdown-toggle" data-toggle="dropdown">Modules<b
						class="caret"></b></a>

					<ul class="dropdown-menu ">

						<li>
							<a href="module-music21.html">music21</a>
						</li>

						<li>
							<a href="module-music21_scale.html">music21/scale</a>
						</li>

						<li>
							<a href="music21.module_duration.html">music21.duration</a>
						</li>

						<li>
							<a href="music21.module_figuredBass.html">music21.figuredBass</a>
						</li>

						<li>
							<a href="music21.module_vfShow.html">music21.vfShow</a>
						</li>

						<li>
							<a href="music21.module_webmidi.html">music21.webmidi</a>
						</li>


					</ul>
				</li>

				<li class="dropdown">
					<a href="classes.list.html" class="dropdown-toggle" data-toggle="dropdown">Classes<b
						class="caret"></b></a>

					<ul class="dropdown-menu ">

						<li>
							<a href="ClassFilter.html">ClassFilter</a>
						</li>

						<li>
							<a href="ClassNotFilter.html">ClassNotFilter</a>
						</li>

						<li>
							<a href="Derivation_Derivation.html">Derivation#Derivation</a>
						</li>

						<li>
							<a href="IsFilter.html">IsFilter</a>
						</li>

						<li>
							<a href="IsNotFilter.html">IsNotFilter</a>
						</li>

						<li>
							<a href="LayoutScore.html">LayoutScore</a>
						</li>

						<li>
							<a href="MeasureExporter.html">MeasureExporter</a>
						</li>

						<li>
							<a href="MeasureParser_MeasureParser.html">MeasureParser#MeasureParser</a>
						</li>

						<li>
							<a href="music21.articulations.Accent.html">music21.articulations.Accent</a>
						</li>

						<li>
							<a href="music21.articulations.Articulation.html">music21.articulations.Articulation</a>
						</li>

						<li>
							<a href="music21.articulations.DynamicArticulation.html">music21.articulations.DynamicArticulation</a>
						</li>

						<li>
							<a href="music21.articulations.LengthArticulation.html">music21.articulations.LengthArticulation</a>
						</li>

						<li>
							<a href="music21.articulations.Marcato.html">music21.articulations.Marcato</a>
						</li>

						<li>
							<a href="music21.articulations.PitchArticulation.html">music21.articulations.PitchArticulation</a>
						</li>

						<li>
							<a href="music21.articulations.Spiccato.html">music21.articulations.Spiccato</a>
						</li>

						<li>
							<a href="music21.articulations.Staccatissimo.html">music21.articulations.Staccatissimo</a>
						</li>

						<li>
							<a href="music21.articulations.Staccato.html">music21.articulations.Staccato</a>
						</li>

						<li>
							<a href="music21.articulations.StrongAccent.html">music21.articulations.StrongAccent</a>
						</li>

						<li>
							<a href="music21.articulations.Tenuto.html">music21.articulations.Tenuto</a>
						</li>

						<li>
							<a href="music21.articulations.TimbreArticulation.html">music21.articulations.TimbreArticulation</a>
						</li>

						<li>
							<a href="music21.audioRecording.exports.Recorder.html">music21.audioRecording.exports.Recorder</a>
						</li>

						<li>
							<a href="music21.base.Music21Object.html">music21.base.Music21Object</a>
						</li>

						<li>
							<a href="music21.beam.Beam.html">music21.beam.Beam</a>
						</li>

						<li>
							<a href="music21.beam.Beams.html">music21.beam.Beams</a>
						</li>

						<li>
							<a href="music21.chord.Chord.html">music21.chord.Chord</a>
						</li>

						<li>
							<a href="music21.clef.AltoClef.html">music21.clef.AltoClef</a>
						</li>

						<li>
							<a href="music21.clef.Bass8vbClef.html">music21.clef.Bass8vbClef</a>
						</li>

						<li>
							<a href="music21.clef.BassClef.html">music21.clef.BassClef</a>
						</li>

						<li>
							<a href="music21.clef.Clef.html">music21.clef.Clef</a>
						</li>

						<li>
							<a href="music21.clef.MezzoSopranoClef.html">music21.clef.MezzoSopranoClef</a>
						</li>

						<li>
							<a href="music21.clef.PercussionClef.html">music21.clef.PercussionClef</a>
						</li>

						<li>
							<a href="music21.clef.SopranoClef.html">music21.clef.SopranoClef</a>
						</li>

						<li>
							<a href="music21.clef.TenorClef.html">music21.clef.TenorClef</a>
						</li>

						<li>
							<a href="music21.clef.Treble8vaClef.html">music21.clef.Treble8vaClef</a>
						</li>

						<li>
							<a href="music21.clef.Treble8vbClef.html">music21.clef.Treble8vbClef</a>
						</li>

						<li>
							<a href="music21.clef.TrebleClef.html">music21.clef.TrebleClef</a>
						</li>

						<li>
							<a href="music21.duration.Duration.html">music21.duration.Duration</a>
						</li>

						<li>
							<a href="music21.duration.exports.Tuplet.html">music21.duration.exports.Tuplet</a>
						</li>

						<li>
							<a href="music21.dynamics.Dynamic.html">music21.dynamics.Dynamic</a>
						</li>

						<li>
							<a href="music21.exceptions21.exports.Music21Exception.html">music21.exceptions21.exports.Music21Exception</a>
						</li>

						<li>
							<a href="music21.exceptions21.exports.StreamException.html">music21.exceptions21.exports.StreamException</a>
						</li>

						<li>
							<a href="music21.exceptions21.ExtendableError.html">music21.exceptions21.ExtendableError</a>
						</li>

						<li>
							<a href="music21.expressions.Expression.html">music21.expressions.Expression</a>
						</li>

						<li>
							<a href="music21.expressions.Fermata.html">music21.expressions.Fermata</a>
						</li>

						<li>
							<a href="music21.figuredBass.exports.Figure.html">music21.figuredBass.exports.Figure</a>
						</li>

						<li>
							<a href="music21.figuredBass.exports.Modifier.html">music21.figuredBass.exports.Modifier</a>
						</li>

						<li>
							<a href="music21.figuredBass.exports.Notation.html">music21.figuredBass.exports.Notation</a>
						</li>

						<li>
							<a href="music21.fromPython.Converter.html">music21.fromPython.Converter</a>
						</li>

						<li>
							<a href="music21.harmony.exports.Harmony.html">music21.harmony.exports.Harmony</a>
						</li>

						<li>
							<a href="music21.instrument.Instrument.html">music21.instrument.Instrument</a>
						</li>

						<li>
							<a href="music21.interval.ChromaticInterval.html">music21.interval.ChromaticInterval</a>
						</li>

						<li>
							<a href="music21.interval.DiatonicInterval.html">music21.interval.DiatonicInterval</a>
						</li>

						<li>
							<a href="music21.interval.GenericInterval.html">music21.interval.GenericInterval</a>
						</li>

						<li>
							<a href="music21.interval.Interval.html">music21.interval.Interval</a>
						</li>

						<li>
							<a href="music21.key.Key.html">music21.key.Key</a>
						</li>

						<li>
							<a href="music21.key.KeySignature.html">music21.key.KeySignature</a>
						</li>

						<li>
							<a href="music21.keyboard.BlackKey.html">music21.keyboard.BlackKey</a>
						</li>

						<li>
							<a href="music21.keyboard.Key.html">music21.keyboard.Key</a>
						</li>

						<li>
							<a href="music21.keyboard.Keyboard.html">music21.keyboard.Keyboard</a>
						</li>

						<li>
							<a href="music21.keyboard.WhiteKey.html">music21.keyboard.WhiteKey</a>
						</li>

						<li>
							<a href="music21.meter.TimeSignature.html">music21.meter.TimeSignature</a>
						</li>

						<li>
							<a href="music21.miditools.Event.html">music21.miditools.Event</a>
						</li>

						<li>
							<a href="music21.miditools.MidiPlayer.html">music21.miditools.MidiPlayer</a>
						</li>

						<li>
							<a href="music21.musicxml.m21ToXml.exports.XMLExporterBase.html">music21.musicxml.m21ToXml.exports.XMLExporterBase</a>
						</li>

						<li>
							<a href="music21.note.GeneralNote.html">music21.note.GeneralNote</a>
						</li>

						<li>
							<a href="music21.note.Lyric.html">music21.note.Lyric</a>
						</li>

						<li>
							<a href="music21.note.Note.html">music21.note.Note</a>
						</li>

						<li>
							<a href="music21.note.NotRest.html">music21.note.NotRest</a>
						</li>

						<li>
							<a href="music21.note.Rest.html">music21.note.Rest</a>
						</li>

						<li>
							<a href="music21.pitch.Accidental.html">music21.pitch.Accidental</a>
						</li>

						<li>
							<a href="music21.pitch.Pitch.html">music21.pitch.Pitch</a>
						</li>

						<li>
							<a href="music21.prebase.ProtoM21Object.html">music21.prebase.ProtoM21Object</a>
						</li>

						<li>
							<a href="music21.renderOptions.RenderOptions.html">music21.renderOptions.RenderOptions</a>
						</li>

						<li>
							<a href="music21.roman.RomanNumeral.html">music21.roman.RomanNumeral</a>
						</li>

						<li>
							<a href="music21.scale.AbstractScale.html">music21.scale.AbstractScale</a>
						</li>

						<li>
							<a href="music21.scale.exports.AbstractAscendingMelodicMinorScale.html">music21.scale.exports.AbstractAscendingMelodicMinorScale</a>
						</li>

						<li>
							<a href="music21.scale.exports.AbstractDiatonicScale.html">music21.scale.exports.AbstractDiatonicScale</a>
						</li>

						<li>
							<a href="music21.scale.exports.AbstractHarmonicMinorScale.html">music21.scale.exports.AbstractHarmonicMinorScale</a>
						</li>

						<li>
							<a href="music21.scale.exports.AscendingMelodicMinorScale.html">music21.scale.exports.AscendingMelodicMinorScale</a>
						</li>

						<li>
							<a href="music21.scale.exports.ConcreteScale.html">music21.scale.exports.ConcreteScale</a>
						</li>

						<li>
							<a href="music21.scale.exports.DiatonicScale.html">music21.scale.exports.DiatonicScale</a>
						</li>

						<li>
							<a href="music21.scale.exports.HarmonicMinorScale.html">music21.scale.exports.HarmonicMinorScale</a>
						</li>

						<li>
							<a href="music21.scale.exports.MajorScale.html">music21.scale.exports.MajorScale</a>
						</li>

						<li>
							<a href="music21.scale.exports.MinorScale.html">music21.scale.exports.MinorScale</a>
						</li>

						<li>
							<a href="music21.scale.Scale.html">music21.scale.Scale</a>
						</li>

						<li>
							<a href="music21.sites.exports.Sites.html">music21.sites.exports.Sites</a>
						</li>

						<li>
							<a href="music21.stream.filters.exports.StreamFilter.html">music21.stream.filters.exports.StreamFilter</a>
						</li>

						<li>
							<a href="music21.stream.iterator.exports.StreamIterator.html">music21.stream.iterator.exports.StreamIterator</a>
						</li>

						<li>
							<a href="music21.stream.Measure.html">music21.stream.Measure</a>
						</li>

						<li>
							<a href="music21.stream.Part.html">music21.stream.Part</a>
						</li>

						<li>
							<a href="music21.stream.Score.html">music21.stream.Score</a>
						</li>

						<li>
							<a href="music21.stream.Stream.html">music21.stream.Stream</a>
						</li>

						<li>
							<a href="music21.stream.Voice.html">music21.stream.Voice</a>
						</li>

						<li>
							<a href="music21.tempo.Metronome.html">music21.tempo.Metronome</a>
						</li>

						<li>
							<a href="music21.tie.Tie.html">music21.tie.Tie</a>
						</li>

						<li>
							<a href="music21.vfShow.Renderer.html">music21.vfShow.Renderer</a>
						</li>

						<li>
							<a href="music21.vfShow.RenderStack.html">music21.vfShow.RenderStack</a>
						</li>

						<li>
							<a href="music21.voiceLeading.exports.VoiceLeadingQuartet.html">music21.voiceLeading.exports.VoiceLeadingQuartet</a>
						</li>

						<li>
							<a href="Note_Note.html">Note#Note</a>
						</li>

						<li>
							<a href="OffsetFilter.html">OffsetFilter</a>
						</li>

						<li>
							<a href="OffsetIterator.html">OffsetIterator</a>
						</li>

						<li>
							<a href="Page.html">Page</a>
						</li>

						<li>
							<a href="PartExporter.html">PartExporter</a>
						</li>

						<li>
							<a href="PartParser.html">PartParser</a>
						</li>

						<li>
							<a href="RecursiveIterator.html">RecursiveIterator</a>
						</li>

						<li>
							<a href="ScoreExporter.html">ScoreExporter</a>
						</li>

						<li>
							<a href="SiteRef.html">SiteRef</a>
						</li>

						<li>
							<a href="SitesException.html">SitesException</a>
						</li>

						<li>
							<a href="Staff.html">Staff</a>
						</li>

						<li>
							<a href="System.html">System</a>
						</li>


					</ul>
				</li>

				<li class="dropdown">
					<a href="global.html" class="dropdown-toggle" data-toggle="dropdown">Global<b
						class="caret"></b></a>

					<ul class="dropdown-menu ">

						<li>
							<a href="global.html#add">add</a>
						</li>

						<li>
							<a href="global.html#aggregation">aggregation</a>
						</li>

						<li>
							<a href="global.html#callbacks">callbacks</a>
						</li>

						<li>
							<a href="global.html#clefFromString">clefFromString</a>
						</li>

						<li>
							<a href="global.html#config">config</a>
						</li>

						<li>
							<a href="global.html#convertKeyStringToMusic21KeyString">convertKeyStringToMusic21KeyString</a>
						</li>

						<li>
							<a href="global.html#fromRoman">fromRoman</a>
						</li>

						<li>
							<a href="global.html#getM21attribute">getM21attribute</a>
						</li>

						<li>
							<a href="global.html#global_usedChannels">global_usedChannels</a>
						</li>

						<li>
							<a href="global.html#info">info</a>
						</li>

						<li>
							<a href="global.html#loadConfiguration">loadConfiguration</a>
						</li>

						<li>
							<a href="global.html#lowestLines">lowestLines</a>
						</li>

						<li>
							<a href="global.html#makeLayoutFromScore">makeLayoutFromScore</a>
						</li>

						<li>
							<a href="global.html#maxMidi">maxMidi</a>
						</li>

						<li>
							<a href="global.html#midiNumDiffFromFrequency">midiNumDiffFromFrequency</a>
						</li>

						<li>
							<a href="global.html#midiToName">midiToName</a>
						</li>

						<li>
							<a href="global.html#mixin">mixin</a>
						</li>

						<li>
							<a href="global.html#nameToLine">nameToLine</a>
						</li>

						<li>
							<a href="global.html#nameToMidi">nameToMidi</a>
						</li>

						<li>
							<a href="global.html#nameToSign">nameToSign</a>
						</li>

						<li>
							<a href="global.html#nameToSteps">nameToSteps</a>
						</li>

						<li>
							<a href="global.html#notesToGeneric">notesToGeneric</a>
						</li>

						<li>
							<a href="global.html#pathSimplify">pathSimplify</a>
						</li>

						<li>
							<a href="global.html#posMod">posMod</a>
						</li>

						<li>
							<a href="global.html#recorderWorkerJs">recorderWorkerJs</a>
						</li>

						<li>
							<a href="global.html#renderHTML">renderHTML</a>
						</li>

						<li>
							<a href="global.html#stepsToName">stepsToName</a>
						</li>

						<li>
							<a href="global.html#toRoman">toRoman</a>
						</li>

						<li>
							<a href="global.html#warnBanner">warnBanner</a>
						</li>


					</ul>
				</li>

			</ul>
		</div>
	</div>

	<div class="row-fluid">


			<div class="span12">

				<div id="main">



		<h1 class="page-title">Source: music21/beam.js</h1>

<section>
	<article>
		<pre
			class="sunlight-highlight-javascript linenums">/**
 * music21j -- Javascript reimplementation of Core music21p features.
 * music21/beam -- Beams and Beam class
 *
 * Copyright (c) 2013-19, Michael Scott Cuthbert and cuthbertLab
 * Based on music21 (=music21p), Copyright (c) 2006–19, Michael Scott Cuthbert and cuthbertLab
 *
 * Module holding beam materials. See {@link music21.beam} namespace.
 * {@link music21.beam.Beam} and {music21.beam.Beams} objects
 *
 * @exports music21/beam
 * @namespace music21.beam
 * @memberof music21
 * @requires music21/prebase
 * @requires music21/duration
 */
import { Music21Exception } from './exceptions21.js';

import * as prebase from './prebase.js';
import * as duration from './duration.js';

export const validBeamTypes = {
    start: true,
    stop: true,
    continue: true,
    partial: true,
};

export const beamableDurationTypes = [
    duration.typeFromNumDict[8],
    duration.typeFromNumDict[16], duration.typeFromNumDict[32],
    duration.typeFromNumDict[64], duration.typeFromNumDict[128],
    duration.typeFromNumDict[256],
];


/**
 * Object representing a single beam (e.g., a 16th note that is beamed needs two)
 *
 * @class Beam
 * @memberof music21.beam
 * @extends music21.prebase.ProtoM21Object
 * @param {string} type - "start", "stop", "continue", "partial"
 * @param {string} direction - only needed for partial beams: "left" or "right"
 * @property {int|undefined} number - which beam line does this refer to; 8th = 1, 16th = 2, etc.
 * @property {number|undefined} independentAngle - the angle of this beam if it is different than others (feathered beams)
 */
export class Beam extends prebase.ProtoM21Object {
    constructor(type, direction) {
        super();
        this.type = type;
        this.direction = direction;
        this.independentAngle = undefined;
        this.number = undefined;
    }
}

/**
 * Object representing a collection of Beams
 *
 * @class Beams
 * @memberof music21.beam
 * @extends music21.prebase.ProtoM21Object
 * @property {Array&lt;music21.beam.Beam>} beamsList - a list of Beam objects
 * @property {Boolean} [feathered=false] - is this a feathered beam.
 * @property {int} length - length of beamsList
 */
export class Beams extends prebase.ProtoM21Object {
    static naiveBeams(srcList) {
        const beamsList = [];
        for (const el of srcList) {
            if (!beamableDurationTypes.includes(el.duration.type)) {
                beamsList.push(undefined);
            } else if (el.isRest) {
                beamsList.push(undefined);
            } else {
                const b = new Beams();
                b.fill(el.duration.type);
                beamsList.push(b);
            }
        }
        return beamsList;
    }

    static removeSandwichedUnbeamables(beamsList) {
        let beamLast;
        let beamNext;
        for (let i = 0; i &lt; beamsList.length; i++) {
            if (i !== beamsList.length - 1) {
                beamNext = beamsList[i + 1];
            } else {
                beamNext = undefined;
            }
            if (beamLast === undefined &amp;&amp; beamNext === undefined) {
                beamsList[i] = undefined;
            }
            beamLast = beamsList[i];
        }
        return beamsList;
    }

    static sanitizePartialBeams(beamsList) {
        for (let i = 0; i &lt; beamsList.length; i++) {
            if (beamsList[i] === undefined) {
                continue;
            }
            const allTypes = beamsList[i].getTypes();
            if (!allTypes.includes('start')
                    &amp;&amp; !allTypes.includes('stop')
                    &amp;&amp; !allTypes.includes('continue')) {
                // nothing but partials;
                beamsList[i] = undefined;
                continue;
            }
            let hasStart = false;
            let hasStop = false;
            for (const b of beamsList[i].beamsList) {
                if (b.type === 'start') {
                    hasStart = true;
                    continue;
                }
                if (b.type === 'stop') {
                    hasStop = true;
                    continue;
                }
                if (hasStart &amp;&amp; b.type === 'partial' &amp;&amp; b.direction === 'left') {
                    b.direction = 'right';
                } else if (hasStop &amp;&amp; b.type === 'partial' &amp;&amp; b.direction === 'right') {
                    b.direction = 'left';
                }
            }
        }
        return beamsList;
    }

    static mergeConnectingPartialBeams(beamsList) {
        for (let i = 0; i &lt; beamsList.length - 1; i++) {
            const bThis = beamsList[i];
            const bNext = beamsList[i + 1];
            if (!bThis || !bNext) {
                continue;
            }
            const bThisNum = bThis.getNumbers();
            if (!bThisNum || bThisNum.length === 0) {
                continue;
            }
            for (const thisNum of bThisNum) {
                const thisBeam = bThis.getByNumber(thisNum);
                if (thisBeam.type !== 'partial' || thisBeam.direction !== 'right') {
                    continue;
                }
                if (!(bNext.getNumbers().includes(thisNum))) {
                    continue;
                }
                const nextBeam = bNext.getByNumber(thisNum);
                if (nextBeam.type === 'partial' || nextBeam.direction === 'right') {
                    continue;
                }
                if (nextBeam.type === 'continue' || nextBeam.type === 'stop') {
                    // should not happen.
                    continue;
                }
                thisBeam.type = 'start';
                thisBeam.direction = undefined;
                if (nextBeam.type === 'partial') {
                    nextBeam.type = 'stop';
                } else if (nextBeam.type === 'start') {
                    nextBeam.type = 'continue';
                }
                nextBeam.direction = undefined;
            }
        }
        // now fix partial-lefts that follow stops:
        for (let i = 1; i &lt; beamsList.length; i++) {
            const bThis = beamsList[i];
            const bPrev = beamsList[i - 1];
            if (!bThis || !bPrev) {
                continue;
            }
            const bThisNum = bThis.getNumbers();
            if (!bThisNum || bThisNum.length === 0) {
                continue;
            }
            for (const thisNum of bThisNum) {
                const thisBeam = bThis.getByNumber(thisNum);
                if (thisBeam.type !== 'partial' || thisBeam.direction !== 'left') {
                    continue;
                }
                if (!(bPrev.getNumbers().includes(thisNum))) {
                    continue;
                }
                const prevBeam = bPrev.getByNumber(thisNum);
                if (prevBeam.type !== 'stop') {
                    continue;
                }
                thisBeam.type = 'stop';
                thisBeam.direction = undefined;
                prevBeam.type = 'continue';
            }
        }
        return beamsList;
    }


    constructor() {
        super();
        this.beamsList = [];
        this.feathered = false;
    }

    get length() {
        return this.beamsList.length;
    }

    /**
     * Append a new {@link music21.beam.Beam} object to this Beams, automatically creating the Beam
     *   object and incrementing the number count.
     *
     * @param {string} type - the type (passed to {@link music21.beam.Beam})
     * @param {string} [direction=undefined] - the direction if type is "partial"
     * @returns {music21.beam.Beam} newly appended object
     */
    append(type, direction) {
        const obj = new Beam(type, direction);
        obj.number = this.beamsList.length + 1;
        this.beamsList.push(obj);
        return obj;
    }

    /**
     * A quick way of setting the beams list for a particular duration, for
            instance, fill("16th") will clear the current list of beams in the
            Beams object and add two beams.  fill(2) will do the same (though note
            that that is an int, not a string).

     * It does not do anything to the direction that the beams are going in,
            or by default.  Either set type here or call setAll() on the Beams
            object afterwards.

     * Both "eighth" and "8th" work.  Adding more than six beams (i.e. things
            like 512th notes) raises an error.

     * @param {string|int} level - either a string like "eighth" or a number like 1 (="eighth")
     * @param {string} [type] - type to fill all beams to.
     * @returns {this}
     */
    fill(level, type) {
        this.beamsList = [];
        let count = 1;
        if (
            level === 1
            || level === '8th'
            || level === duration.typeFromNumDict[8]
        ) {
            count = 1;
        } else if (level === 2 || level === duration.typeFromNumDict[16]) {
            count = 2;
        } else if (level === 3 || level === duration.typeFromNumDict[32]) {
            count = 3;
        } else if (level === 4 || level === duration.typeFromNumDict[64]) {
            count = 4;
        } else if (level === 5 || level === duration.typeFromNumDict[128]) {
            count = 5;
        } else if (level === 6 || level === duration.typeFromNumDict[256]) {
            count = 6;
        } else {
            throw new Music21Exception('cannot fill beams for level ' + level);
        }
        for (let i = 1; i &lt;= count; i++) {
            const obj = new Beam();
            obj.number = i;
            this.beamsList.push(obj);
        }
        if (type !== undefined) {
            this.setAll(type);
        }
        return this;
    }

    /**
     * Get the beam with the given number or throw an exception.
     *
     * @param {int} number - the beam number to retrieve (usually one less than the position in `.beamsList`)
     * @returns {music21.beam.Beam|undefined}
     */
    getByNumber(number) {
        if (!this.getNumbers().includes(number)) {
            throw new Music21Exception('beam number error: ' + number);
        }
        for (const thisBeam of this.beamsList) {
            if (thisBeam.number === number) {
                return thisBeam;
            }
        }
        return undefined;
    }

    /**
     * Get an Array of all the numbers for the beams
     *
     * @returns {Array&lt;int>} all the numbers
     */
    getNumbers() {
        const numbers = [];
        for (const thisBeam of this.beamsList) {
            numbers.push(thisBeam.number);
        }
        return numbers;
    }

    /**
     * Returns the type + "-" + direction (if direction is defined)
     * for the beam with the given number.
     *
     * @param {int} number
     * @returns {music21.beam.Beam|undefined}
     */
    getTypeByNumber(number) {
        const beamObj = this.getByNumber(number);
        if (beamObj.direction === undefined) {
            return beamObj.type;
        } else {
            const x = beamObj.type + '-' + beamObj.direction;
            return x;
        }
    }

    /**
     * Get an Array of all the types for the beams
     *
     * @returns {Array&lt;string>} all the types
     */
    getTypes() {
        const types = [];
        for (let i = 0; i &lt; this.length; i++) {
            types.push(this.beamsList[i].type);
        }
        return types;
    }

    /**
     * Set all the {@link music21.beam.Beam} objects to a given type/direction
     *
     * @param {string} type - beam type
     * @param {string} [direction] - beam direction
     * @returns {this}
     */
    setAll(type, direction) {
        if (validBeamTypes[type] === undefined) {
            throw new Music21Exception('invalid beam type: ' + type);
        }
        for (let i = 0; i &lt; this.length; i++) {
            const b = this.beamsList[i];
            b.type = type;
            b.direction = direction;
        }
        return this;
    }

    /**
     * Set the {@link music21.beam.Beam} object specified by `number` to a given type/direction
     *
     * @param {int} number
     * @param {string} type
     * @param {string} [direction]
     * @returns {this}
     */
    setByNumber(number, type, direction) {
        if (direction === undefined) {
            const splitIt = type.split('-');
            type = splitIt[0];
            direction = splitIt[1]; // not unpacking because. can be undefined...
        }
        if (validBeamTypes[type] === undefined) {
            throw new Music21Exception('invalid beam type: ' + type);
        }
        for (let i = 0; i &lt; this.length; i++) {
            if (this.beamsList[i].number === number) {
                this.beamsList[i].type = type;
                this.beamsList[i].direction = direction;
            }
        }
        return this;
    }
}
</pre>
	</article>
</section>





				</div>

				<div class="clearfix"></div>
				<footer>


		<span class="copyright">
		Music21j, Copyright © 2013-2021 Michael Scott Asato Cuthbert.
		</span>
					<br />

		<span class="jsdoc-message">
		Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.6.3</a>
		on Wed Jul 31st 2019 using the <a
			href="https://github.com/terryweiss/docstrap">DocStrap template</a>.
		</span>
				</footer>
			</div>


			<br clear="both">
		</div>

	</div>
	<!--<script src="scripts/sunlight.js"></script>-->
	<script src="scripts/docstrap.lib.js"></script>
	<script src="scripts/bootstrap-dropdown.js"></script>
	<script src="scripts/toc.js"></script>

	<script>
		$( function () {
			$( "[id*='$']" ).each( function () {
				var $this = $( this );

				$this.attr( "id", $this.attr( "id" ).replace( "$", "__" ) );
			} );

			$( "#toc" ).toc( {
				anchorName  : function ( i, heading, prefix ) {
					return $( heading ).attr( "id" ) || ( prefix + i );
				},
				selectors   : "h1,h2,h3,h4",
				showAndHide : false,
				scrollTo    : "100px"
			} );

			$( "#toc>ul" ).addClass( "nav nav-pills nav-stacked" );
			$( "#main span[id^='toc']" ).addClass( "toc-shim" );
			$( '.dropdown-toggle' ).dropdown();
//			$( ".tutorial-section pre, .readme-section pre" ).addClass( "sunlight-highlight-javascript" ).addClass( "linenums" );

			$( ".tutorial-section pre, .readme-section pre" ).each( function () {
				var $this = $( this );

				var example = $this.find( "code" );
				exampleText = example.html();
				var lang = /{@lang (.*?)}/.exec( exampleText );
				if ( lang && lang[1] ) {
					exampleText = exampleText.replace( lang[0], "" );
					example.html( exampleText );
					lang = lang[1];
				} else {
					lang = "javascript";
				}

				if ( lang ) {

					$this
						.addClass( "sunlight-highlight-" + lang )
						.addClass( "linenums" )
						.html( example.html() );

				}
			} );

			Sunlight.highlightAll( {
				lineNumbers : true,
				showMenu : true,
				enableDoclinks : true
			} );
		} );
	 </script>



	<!--Navigation and Symbol Display-->



	<!--Google Analytics-->


</body>
</html>
