<!DOCTYPE html>
<!--suppress JSConstantReassignment -->
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Embed Soundfonts from elsewhere</title>
    <link rel="stylesheet"
          href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
          integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN"
          crossorigin="anonymous">
</head>
<body>
<h1>Embed Soundfonts from elsewhere</h1>
<p>This script (view source) shows how music21 can be embedded (like in a Fiddle) and
    load soundfonts from elsewhere.

    Note that it uses whatever the latest release of music21j is on cdn.jsdelivr.net
    not whatever you are developing.
</p>
<button role="button" class="btn btn-primary" onclick="playStream()">Click me!</button>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.min.js"
        integrity="sha384-BBtl+eGJRgqQAUMxJ7pMwbEyER4l1g+O15P+16Ep7Q9Q+zqX6gSbd85u4mG4QzX+"
        crossorigin="anonymous"></script>
<script>
    window.m21conf = { loadSoundfont: false };
</script>
<script
    src="https://cdn.jsdelivr.net/npm/music21j/releases/music21.debug.min.js"
></script>
<script>
    music21.common.urls.soundfontUrl = 'https://raw.githubusercontent.com/gleitz/midi-js-soundfonts/gh-pages/FluidR3_GM/';
    function playStream() {
        music21.miditools.loadSoundfont('clarinet', i => {
           const tn = music21.tinyNotation.TinyNotation('4/4 c4 d e f8 f g1');
           tn.rc(music21.note.Note).get(-3).articulations.push(new music21.articulations.Staccatissimo);
           tn.instrument = i;
           tn.playStream();
        });
    }
</script>
</body>
</html>
