<html>
    <head>
        <title>Piano Keyboard!</title>
        <meta charset="utf-8">
        <link rel="stylesheet" href="../css/m21.css">
        <script type="module" src="./m21-dev.ts"></script>
    </head>
    <body>
    <div id="keyboardDiv"></div>
    <div id="putMidiSelectHere"></div>
    <script>
    function main() {
        const k = new music21.keyboard.Keyboard();
        const kd = document.getElementById('keyboardDiv');
        k.startPitch = 6;
        k.endPitch = 57;
        k.appendKeyboard(kd);
        const options = {
            onsuccess: function () {
                console.log(this)
            },
            oninputsuccess: function () {
                console.log("found one!")
            },
            oninputempty: function () {
                console.log("nope")
            }
        };
        music21.webmidi.createSelector(document.querySelector("#putMidiSelectHere"), options);
        music21.miditools.callbacks.general = [music21.keyboard.jazzHighlight.bind(k),
            music21.miditools.sendToMIDIjs,
        ];
    }
    document.addEventListener('DOMContentLoaded', () => {
        main();
    });
    </script>

</body>
</html>

